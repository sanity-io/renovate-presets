{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Stay up to date to Sanity Studio v3, and when it reaches stable release this preset will create PRs for you that migrates your studio as well as all your plugins in a single PR",
  "packageRules": [
    {
      "description": "Most of the dev-preview plugins uses parcel and typescript, and parcel currently have an issue if using 4.8, this rule will prevent making PRs for 4.8 until this problem is resolved",
      "packageNames": ["typescript"],
      "allowedVersions": "<=4.7"
    },
    {
      "description": "Sanity studio is adding React v18 support, this rule will be removed after a new dev-preview is published that includes it",
      "matchPackagePrefixes": ["react", "@types/react"],
      "matchDepTypes": ["dependencies", "devDependencies", "resolutions"],
      "allowedVersions": "<=18",
      "enabled": true
    },
    {
      "description": "Ensures the peerDependencies sanity entry is dev-preview compatible",
      "groupName": "sanity-studio-v3-widen",
      "packageNames": ["sanity"],
      "depTypeList": ["peerDependencies"],
      "rangeStrategy": "widen",
      "followTag": "dev-preview",
      "schedule": ["at any time"]
    },
    {
      "description": "Studio v3 is currently a prerelease and thus it must use exact versions and need to be pinned to avoid other prereleases than dev-preview to be installed accidentally",
      "groupName": "sanity-studio-v3-pin",
      "packageNames": ["sanity"],
      "depTypeList": ["dependencies", "devDependencies", "resolutions"],
      "rangeStrategy": "pin",
      "followTag": "dev-preview",
      "schedule": ["at any time"]
    },
    {
      "description": "@sanity/ui is react 18 ready on the next branch",
      "groupName": "sanity-ui-pin",
      "packageNames": ["@sanity/ui", "@sanity/color", "@sanity/icons", "@sanity/logos"],
      "depTypeList": ["dependencies", "devDependencies", "resolutions"],
      "rangeStrategy": "pin",
      "followTag": "beta",
      "schedule": ["at any time"]
    },
    {
      "description": "Studio v3 is now a single dependency instead of multiple",
      "matchDatasources": ["npm"],
      "matchPackageNames": [
        "@sanity/base",
        "@sanity/cli",
        "@sanity/core",
        "@sanity/default-layout",
        "@sanity/default-login",
        "@sanity/desk-tool",
        "@sanity/types"
      ],
      "replacementName": "sanity",
      "replacementVersion": "dev-preview",
      "schedule": ["at any time"]
    },
    {
      "groupName": "sanity-studio-v3-plugins",
      "packageNames": [
        "@sanity/code-input",
        "@sanity/color-input",
        "@sanity/document-internationalization",
        "@sanity/google-maps-input",
        "@sanity/orderable-document-list",
        "@sanity/scheduled-publishing",
        "sanity-plugin-asset-source-unsplash",
        "sanity-plugin-content-calendar",
        "sanity-plugin-dashboard-widget-cats",
        "sanity-plugin-dashboard-widget-document-list",
        "sanity-plugin-dashboard-widget-netlify",
        "sanity-plugin-dashboard-widget-vercel",
        "sanity-plugin-documents-pane",
        "sanity-plugin-graph-view",
        "sanity-plugin-iframe-pane",
        "sanity-plugin-internationalized-array",
        "sanity-plugin-latex-input",
        "sanity-plugin-markdown",
        "sanity-plugin-mux-input"
      ],
      "followTag": "studio-v3",
      "rangeStrategy": "pin",
      "schedule": ["at any time"]
    },
    {
      "groupName": "sanity-v3-studio-plugins",
      "packageNames": ["sanity-plugin-media"],
      "followTag": "v3-studio",
      "rangeStrategy": "pin",
      "schedule": ["at any time"]
    },
    {
      "groupName": "sanity-dev-preview-plugins",
      "packageNames": ["@sanity/vision"],
      "followTag": "dev-preview",
      "rangeStrategy": "pin",
      "schedule": ["at any time"]
    }
  ]
}
